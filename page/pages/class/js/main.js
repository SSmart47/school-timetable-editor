const firebaseConfig={apiKey:"AIzaSyA7Mikp72erxl1u5HvrK2jx8EpOJQbt7T8",authDomain:"schooltimetableeditor.firebaseapp.com",databaseURL:"https://schooltimetableeditor-default-rtdb.firebaseio.com",projectId:"schooltimetableeditor",storageBucket:"schooltimetableeditor.appspot.com",messagingSenderId:"72416096529",appId:"1:72416096529:web:848557d64cc192c711dcb0"};firebase.initializeApp(firebaseConfig);var username=localStorage.getItem("ss47_schooltimetableeditor_username");function haveSpace(e){for(var t=0;t<e.length;t++)if(" "==e[t])return!0;return!1}function haveK(e){for(var t=0;t<e.length;t++)if("%"==e[t]||"'"==e[t]||'"'==e[t]||"/"==e[t]||"#"==e[t]||"."==e[t]||"$"==e[t]||"["==e[t]||"]"==e[t])return!0;return!1}function JsonToList(e){var t,a=e,s=[];for(t in a)s.push([t,a[t]]);return s}function UpdateList(){firebase.database().ref().child("users").child(username).child("classes").get().then(e=>{if(e.exists()){var t=document.getElementById("id_list_1"),a=JsonToList(e.val());console.log(a);for(var s="",o=0;o<a.length;o++){var r=a[o][0];s+='<tr><th scope="row">'+(o+1)+"</th>",s+="<td>"+r+"</td>",s+='<td><button class="btn btn-danger" onclick="RemoveSubject(\''+r+"')\">Удалить</button></td>",s+="</tr>"}t.innerHTML=s}else console.log("Exist: 0"),document.getElementById("id_list_1").innerHTML=""}).catch(e=>{console.error(e)})}UpdateList();username=localStorage.getItem("ss47_schooltimetableeditor_username");function RemoveSubject(e){firebase.database().ref("users/"+username+"/classes/"+e).remove(),console.log('Removed: "'+e+'"'),UpdateList()}document.getElementById("id_btn_back").onclick=function(){localStorage.setItem("ss47_schooltimetableeditor_username",username),window.location="../../main.html"},document.getElementById("id_btn_add_science").onclick=function(){var t=document.getElementById("id_science_name").value;""!=t?haveK(t)?alert("Имя класса не должно содержать символы ' / \" . # $ [ ] %"):firebase.database().ref().child("users").child(username).child("classes").child(t).get().then(e=>{e.exists()?alert("Класс с таким именем уже существует!"):(firebase.database().ref("users/"+username+"/classes/"+t).set({name:t}),UpdateList())}).catch(e=>{console.error(e)}):alert('Заполните поле "Имя класса"!')};
