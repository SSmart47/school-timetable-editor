const firebaseConfig={apiKey:"AIzaSyA7Mikp72erxl1u5HvrK2jx8EpOJQbt7T8",authDomain:"schooltimetableeditor.firebaseapp.com",databaseURL:"https://schooltimetableeditor-default-rtdb.firebaseio.com",projectId:"schooltimetableeditor",storageBucket:"schooltimetableeditor.appspot.com",messagingSenderId:"72416096529",appId:"1:72416096529:web:848557d64cc192c711dcb0"};firebase.initializeApp(firebaseConfig);var username=localStorage.getItem("ss47_schooltimetableeditor_username");function haveSpace(e){for(var t=0;t<e.length;t++)if(" "==e[t])return!0;return!1}function haveK(e){for(var t=0;t<e.length;t++)if("%"==e[t]||"'"==e[t]||'"'==e[t]||"/"==e[t]||"#"==e[t]||"."==e[t]||"$"==e[t]||"["==e[t]||"]"==e[t])return!0;return!1}function JsonToList(e){var t,o=e,a=[];for(t in o)a.push([t,o[t]]);return a}function UpdateList(){firebase.database().ref().child("users").child(username).child("subjects").get().then(e=>{if(e.exists()){var t=document.getElementById("id_list_1"),o=JsonToList(e.val());console.log(o);for(var a="",s=0;s<o.length;s++){var n=o[s][0];a+='<tr><th scope="row">'+(s+1)+"</th>",a+="<td>"+n+"</td>",a+='<td><button class="btn btn-danger" onclick="RemoveSubject(\''+n+"')\">Удалить</button></td>",a+="</tr>"}t.innerHTML=a}else console.log("Exist: 0"),document.getElementById("id_list_1").innerHTML=""}).catch(e=>{console.error(e)})}UpdateList();username=localStorage.getItem("ss47_schooltimetableeditor_username");function RemoveSubject(e){firebase.database().ref("users/"+username+"/subjects/"+e).remove(),console.log('Removed: "'+e+'"'),UpdateList()}document.getElementById("id_btn_back").onclick=function(){localStorage.setItem("ss47_schooltimetableeditor_username",username),window.location="../../main.html"},document.getElementById("id_btn_add_science").onclick=function(){var e=document.getElementById("id_science_name").value;""!=e?haveK(e)?alert("Имя предмета не должно содержать символы ' / \" . # $ [ ] %"):(firebase.database().ref("users/"+username+"/subjects/"+e).set({name:e}),UpdateList()):alert('Заполните поле "Имя предмета"!')};
